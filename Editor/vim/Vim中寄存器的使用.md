# Vim中寄存器的使用

http://yejinxin.github.io/vim-register-usage/

Vim中的寄存器(register)作用和windows中的剪贴板类似，不过Vim中的寄存器不止一个，有不同的类别，有不同的用处。

例如，"ayy命令会将yy命令的结果放入寄存器a中，也就是复制该行文本到寄存器a中。然后"ap命令则表示粘贴寄存器a中的内容。

具体而言，Vim中常用的寄存器包括：

1. **默认寄存器**(Unamed Register) ""

又称无名寄存器，当使用y、d、c、s、x命令时，对应的文本将自动放入该寄存器。即使在复制或删除文本时，已经显示地指定了别的寄存器（例如"ayy命令），这些文本仍然会同时放入无名寄存器。

1. **数字寄存器**(Numbered Register) "0 至 "9

- - 寄存器"0默认存放最近复制的文本。
  - 寄存器"1默认存放最近删除的文本，除非删除内容少于一行。
  - 寄存器"2默认存放倒数第二次删除的文本，除非删除内容少于一行。
  - 寄存器"3到"9依次类推。

寄存器"0的一个用处是当你想拷贝A替换B的时候。如果直接yw拷贝A，然后dw删除B，再粘贴p的话，是不行的，因为删除命令也会把删除的文本放到默认寄存器中。此时，可以就使用"0p命令来粘贴刚才复制的文本了。

1. **短删除寄存器**(Small Delete Register) "-

当删除少于一行的文本时，这些文本默认将存放于此。

1. **命名寄存器**(Named Register) "a 至 "z，"A 至 "Z

也称字母寄存器，这些寄存器不会自动填充，是提供给用户使用的。注意，大小写是一一对应的，小写的表示替换原寄存器的内容，而大写的则表示追加到原寄存器内容中。

1. **只读寄存器**(Read-only Register)

有4个寄存器是只读的，你只能读这些寄存器，不能写这些寄存器。

- - "%包含当前文件名；
  - "#包含交替文件名；
  - ".包含最近插入的文本；
  - ":包含上次执行的命令行；

1. **黑洞寄存器**(Black Hole Register) "_

类似于linux中的/dev/null的作用，任何放入该寄存器中的文本都将丢弃。黑洞寄存器也可以用于解决上文提到的“复制、删除、粘贴问题”，在删除的时候使用"_d命令将删除的文本扔至黑洞即可。

1. **选择和拖拽寄存器**(Selection and Drop Register) "* "+ "~

"*寄存器用户访问系统剪贴板，在windows下和"+寄存器相同；

在Linux下，"+寄存器包含选中的文本，而"*寄存器包含复制的文本；

而"~寄存器包含从其它应用程序拖拽到Vim中的文本。

使用"*寄存器和"+寄存器，我们就可以方便的在Vim和外部应用程序中复制粘贴了。我们还可以设置set clipboard=unamed或set clipboard=unamedplus使得所有拷贝删除操作都直接使用系统剪贴板，更加方便。

需要注意的是，如果执行:echo has('clipboard')返回0，表示当前Vim版本不支持访问系统剪贴板，需要重新编译或更换版本，这一般需要系统有GUI的安装。

1. **搜索模式寄存器**(Search Pattern Register) "/

"/寄存器包含上次文本搜索的命令。

1. **表达式寄存器**(Expression Register) "=

输入"=命令后，Vim底部会出现一个以"="开头的提示行，可以在这里输入表达式例如5*27，按回车确认后，即可使用p粘贴表达式的取值。

另外，输入的表达式不仅可以包含通常的算术运算符，还可以使用Vim特定的函数和运算符等，例如"=$PATH得到环境变量PATH的值。

使用:register或:reg命令可以查看当前已定义的所有寄存器的值。使用:help registers命令可以查看相关帮助。

**reference**

http://blog.sanctum.geek.nz/advanced-vim-registers/

http://blah.blogsome.com/2006/04/27/vim_tut_register/

**每日一Vim（8）---Vim寄存器**

http://liuzhijun.iteye.com/blog/1830931

*先抛出一个问题：每次打开Vim，想找一段文本来练练手，于是打开网页copy了一段，问题来了，怎样粘贴到vim的编辑器里头去呢？如果你还在CTRL+v的话，说明你还无法割舍Windows，就像东方姑娘忘不了令狐冲):这里暂且告诉你如何粘贴：SHIFT+INSERT 两个键联合起来。再来看下面的原理* 

寄存器是Vim用来存储文件的临时空间，当使用命令y（yank）或d（delete）复制删除文本时，该文本就会被保存在寄存器中，通过p（put）命令插入刚删除或复制的内容。vim的寄存器分为不同的种类：

**数字寄存器：**

在normal模式下输入:reg，您是否看到很多“（双引号）开头的数字了呢，这些都是寄存器，（如果暂时没看到，那么在对文本做几个操作，比如：dd,yy等），这些寄存器里保存了最近删除的和复制的文本。

数字寄存器有十个，分别是："0，"1，"2... "9（注意：**数字前有个双引号**），寄存器"0保存上一次复制(y)操作的文本，"1到"9寄存器保存最近9次删除的文本行（**注意这个“行”字**），"1保存的内容是**最最近一次**删除的内容（也就是说最后一次执行删除命令保存的内容）"2保存的是**倒数第二次删除**的内容，依此类推，直到"9，如果又有新的操作，那么"9的内容将会被"8的内容替换，先前”9的内容将被丢弃。 

那么p（put）命令粘贴是哪个寄存器中的内容呢？有时候是粘贴的是"1寄存器的，有时粘贴的是"0寄存器中的，但是总的原则就是**粘贴最近一次删除或者复制的内容**，如果删除是最近的一次，就是粘贴"1的，也就是粘贴刚刚删除的文本，如果复制是最近的一次操作，那么粘贴的内容是"0中的，也就是粘贴刚刚复制的内容。

**字母寄存器：**

"a，"b，"c...都是字母寄存器，也许你执行:reg的时候看不到这些命令，不要紧，稍后就有了。之前粘贴我们用的都是p命令，如果我想粘贴其他寄存器里面的内容呢，你想到了吗？答案就是：**寄存器的名称+p**。现在我们新建一个字母寄存器，把当前三行保存到"a寄存器中去，具体操作如下：在normal模式下输入"a3yy，这样当前三行就保存在"a中去了，粘贴同样在normal模式下，"3p 即可。如果是大写字母的寄存器，如执行："Cdd：他的作用是把当前行删除，再把内容追加到"c寄存器中，也就是说**字母寄存器没有大写之分，只是功能上有区别，大写就是追加，小写是替换**。

**其他寄存器：**

""：无名寄存器，p命令粘贴的内容，保存最近一次删除或复制的内容。

“-：（**-是个减号**）小删除寄存器（small delete register），前面说过要您注意这个”行“字，也就是说并不是所有删除的文本都会保存在数字寄存器中，如果你删除的只是一个单词或字母： dw或者x，那么这个单词并不会保存在"1寄存器中，而是保存在"-寄存器里面。所有不包含**换行符**的删除都会保存在此寄存器中。

"* ：这个就是系统寄存器喽，最开始的问题的第二个答案知道了吧 

当然还有一些寄存器，这里就不一一介绍了。